{% extends "base.html" %}

{% block content %}

<h2>Transaction Details</h2>
<p><b>Transaction Date:</b> {{ transaction.get_date_and_time() }}</p>
<p><b>Total Amount Paid:</b> {{ transaction.get_total_amount_paid() }}</p>
<p><b>Recorded By:</b><a href="{{ url_for('main.account', user_id=transaction.user_id) }}"> {{ transaction.user.fullname }}</a></p>

{% if transaction.senior_citizen_name %}
<h2>Senior Citizen Discount Details</h2>
<p><b>Senior Citizen Name:</b> {{ transaction.senior_citizen_name }}</p>
<p><b>Senior Citizen ID:</b> {{ transaction.senior_citizen_id }}</p>
{% endif %}

{% if transaction.gcash_ref_no %}
<h2>GCash Transaction Details</h2>
<p><b>GCash Reference Number:</b> {{ transaction.gcash_ref_no }}</p>
{% endif %}

<style>
    #orders_table {
        width: 100%;
    }
    tbody.orders td, thead.orders th {
        width: 20%;
    }
    .orders {
        display: block;
    }
    #orders_body {
        height: 100px;
        overflow-y: auto;
        overflow-x: hidden;
    }
</style>

<h2>Orders</h2>
<table id="orders_table">
    <thead class="orders">
    <tr class="orders">
        <th scope="col">Item</td>
        <th scope="col">No. of Orders</td>
        <th scope="col">Total Price</td>
    </tr>
    </thead>
    <tbody class="orders" id="orders_body">
    {% for order in orders %}
    <tr>
        {% if order.product %}
        <td><a href="{{ url_for('main.product_details', product_id=order.product_id) }}">{{ order.product.name }}</a></td>
        {% else %}
        <td>Product Deleted</td>
        {% endif %}
        <td>{{ order.quantity }}</td>
        <td>{{ order.get_total_price() }}</td>
    </tr>
    {% endfor %}
    </tbody>
</table>

{% endblock %}